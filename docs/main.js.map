{"version":3,"file":"main.js","sources":["../src/ImageUploader.tsx","../src/CommonImageWindow.ts","../src/DeleteIcon.tsx","../src/SaveIcon.tsx","../src/CanvasImageWindow.tsx","../src/EditIcon.tsx","../src/ImagePreview.tsx","../src/index.tsx","../src/demo.tsx"],"sourcesContent":["import React, { useRef, useState } from \"react\";\r\n\r\ntype ImageUploaderProps = {\r\n  setImageSource: any;\r\n  width: number;\r\n  height: number;\r\n};\r\nexport default function ImageUploader({\r\n  setImageSource,\r\n  width,\r\n  height\r\n}: ImageUploaderProps) {\r\n  const fileInput = useRef<HTMLInputElement | null>(null);\r\n  const [isHovering, setIsHovering] = useState(false);\r\n\r\n  const handleImageChange = () => {\r\n    if (!fileInput.current || !fileInput.current.files) {\r\n      return;\r\n    }\r\n    setImageSource(fileInput.current.files[0]);\r\n  };\r\n\r\n  let classes = \"drop-area\";\r\n  if (isHovering) {\r\n    classes += \" drop-area--hovering\";\r\n  }\r\n  return (\r\n    <div>\r\n      <div\r\n        className={classes}\r\n        style={{ width: `${width}px`, height: `${height}px` }}\r\n        onDrop={e => {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n          setImageSource(e.dataTransfer.files[0]);\r\n        }}\r\n        onDragEnter={e => {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n          setIsHovering(true);\r\n        }}\r\n        onDragOver={e => {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n          setIsHovering(true);\r\n        }}\r\n        onDragLeave={e => {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n          setIsHovering(false);\r\n        }}\r\n      >\r\n        <label htmlFor=\"uploadInput\">Drop an image or click</label>\r\n        <input\r\n          id=\"uploadInput\"\r\n          ref={fileInput}\r\n          onChange={handleImageChange}\r\n          type=\"file\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { number } from \"prop-types\";\r\n\r\nconst constrainPosition = (x: number, min: number) =>\r\n  Math.max(Math.min(x, 0), min);\r\n\r\ntype Rect = {\r\n  width: number;\r\n  height: number;\r\n};\r\n\r\ntype Point = {\r\n  x: number;\r\n  y: number;\r\n};\r\n\r\nexport default class CommonImageWindow {\r\n  private ctx: CanvasRenderingContext2D | null;\r\n  private imageNaturalSize: Rect;\r\n  private imageSize: Rect;\r\n  private containerSize: Rect;\r\n  private imagePosition: Point;\r\n  private isPanning: boolean;\r\n  private isScaling: boolean;\r\n  private panStart: Point;\r\n  private scaleStart: {\r\n    width: number;\r\n    height: number;\r\n    x: number;\r\n    y: number;\r\n  };\r\n  private imagePositionStart: Point;\r\n  private onScale: ((scale: number) => void) | null;\r\n  private image: HTMLImageElement;\r\n  constructor(\r\n    size: { width: number; height: number },\r\n    canvas: HTMLCanvasElement,\r\n    imageSource: string,\r\n    initialDimensions: {\r\n      left: number;\r\n      top: number;\r\n      scaledHeight: number;\r\n      scaledWidth: number;\r\n    } | null,\r\n    imageLoadedCB: () => void\r\n  ) {\r\n    this.ctx = canvas.getContext(\"2d\");\r\n    // Image state\r\n    this.imageNaturalSize = {\r\n      width: 0,\r\n      height: 0\r\n    };\r\n    this.imageSize = { width: 0, height: 0 };\r\n    this.imagePosition = { x: 0, y: 0 };\r\n    this.containerSize = size;\r\n\r\n    // Window state\r\n    this.isPanning = false;\r\n    this.isScaling = false;\r\n    this.panStart = { x: 0, y: 0 };\r\n    this.scaleStart = { width: 0, height: 0, x: 0, y: 0 };\r\n    // The position of the image when a pan was started\r\n    this.imagePositionStart = { x: 0, y: 0 };\r\n    this.onScale = null;\r\n\r\n    this.image = new Image();\r\n    this.image.src = imageSource;\r\n\r\n    this.image.onload = () => {\r\n      this.imageNaturalSize = {\r\n        width: this.image.naturalWidth,\r\n        height: this.image.naturalHeight\r\n      };\r\n      const aspectRatio = this.image.naturalWidth / this.image.naturalHeight;\r\n      if (this.image.naturalWidth >= this.image.naturalHeight) {\r\n        this.imageSize = {\r\n          width: size.width * aspectRatio,\r\n          height: size.height\r\n        };\r\n      } else {\r\n        this.imageSize = {\r\n          width: size.width,\r\n          height: size.width / aspectRatio\r\n        };\r\n      }\r\n      if (initialDimensions) {\r\n        this.imageSize = {\r\n          width: initialDimensions.scaledWidth,\r\n          height: initialDimensions.scaledHeight\r\n        };\r\n        this.imagePosition = {\r\n          x: initialDimensions.left,\r\n          y: initialDimensions.top\r\n        };\r\n      }\r\n\r\n      imageLoadedCB();\r\n      this.draw();\r\n    };\r\n  }\r\n\r\n  handleScale(callback: (scale: number) => void) {\r\n    this.onScale = callback;\r\n  }\r\n\r\n  startPan(x: number, y: number) {\r\n    this.isPanning = true;\r\n    this.panStart = {\r\n      x: x,\r\n      y: y\r\n    };\r\n    this.imagePositionStart = {\r\n      x: this.imagePosition.x,\r\n      y: this.imagePosition.y\r\n    };\r\n  }\r\n\r\n  endPan() {\r\n    this.isPanning = false;\r\n  }\r\n\r\n  pan(x: number, y: number) {\r\n    if (!this.isPanning) {\r\n      return;\r\n    }\r\n\r\n    this.imagePosition = {\r\n      x: constrainPosition(\r\n        this.imagePositionStart.x + (x - this.panStart.x),\r\n        this.containerSize.width - this.imageSize.width\r\n      ),\r\n      y: constrainPosition(\r\n        this.imagePositionStart.y + (y - this.panStart.y),\r\n        this.containerSize.height - this.imageSize.height\r\n      )\r\n    };\r\n\r\n    this.draw();\r\n  }\r\n\r\n  startScale() {\r\n    this.isScaling = true;\r\n    this.scaleStart = {\r\n      x: this.imagePosition.x,\r\n      y: this.imagePosition.y,\r\n      width: this.imageSize.width,\r\n      height: this.imageSize.height\r\n    };\r\n  }\r\n\r\n  stopScale() {\r\n    this.isScaling = false;\r\n  }\r\n  // factor: percentage as decimal\r\n  scale(factor: number) {\r\n    if (factor < this.getMinScale()) {\r\n      return false;\r\n    }\r\n\r\n    const newWidth = this.image.naturalWidth * factor;\r\n    const newHeight = this.image.naturalHeight * factor;\r\n\r\n    this.imageSize = {\r\n      width: newWidth,\r\n      height: newHeight\r\n    };\r\n\r\n    // The ratio of the new width compared to the starting width\r\n    const scaledFactorX = newWidth / this.scaleStart.width;\r\n    const scaledFactorY = newHeight / this.scaleStart.height;\r\n    this.imagePosition = {\r\n      x: constrainPosition(\r\n        (this.scaleStart.x - this.containerSize.width / 2) * scaledFactorX +\r\n          this.containerSize.width / 2,\r\n        this.containerSize.width - this.imageSize.width\r\n      ),\r\n      y: constrainPosition(\r\n        (this.scaleStart.y - this.containerSize.height / 2) * scaledFactorY +\r\n          this.containerSize.height / 2,\r\n        this.containerSize.height - this.imageSize.height\r\n      )\r\n    };\r\n\r\n    this.draw();\r\n    if (this.onScale !== null) {\r\n      this.onScale(factor);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  getMinScale() {\r\n    return Math.max(\r\n      this.containerSize.width / this.imageNaturalSize.width,\r\n      this.containerSize.height / this.imageNaturalSize.height\r\n    );\r\n  }\r\n\r\n  getImageSize() {\r\n    return {\r\n      left: this.imagePosition.x,\r\n      top: this.imagePosition.y,\r\n      width: this.containerSize.width,\r\n      height: this.containerSize.height,\r\n      scaledWidth: this.imageSize.width,\r\n      scaledHeight: this.imageSize.height\r\n    };\r\n  }\r\n\r\n  draw() {\r\n    if (!this.ctx) {\r\n      return;\r\n    }\r\n\r\n    this.ctx.clearRect(\r\n      0,\r\n      0,\r\n      this.containerSize.width,\r\n      this.containerSize.height\r\n    );\r\n    this.ctx.drawImage(\r\n      this.image,\r\n      this.imagePosition.x,\r\n      this.imagePosition.y,\r\n      this.imageSize.width,\r\n      this.imageSize.height\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function DeleteIcon() {\r\n  return (\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"100%\">\r\n      <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\" />\r\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n    </svg>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function SaveIcon() {\r\n  return (\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"100%\">\r\n      <path fill=\"none\" d=\"M0 0h24v24H0z\" />\r\n      <path d=\"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\" />\r\n    </svg>\r\n  );\r\n}\r\n","import { useState, useRef, useEffect } from \"react\";\r\nimport React from \"react\";\r\nimport CommonImageWindow from \"./CommonImageWindow\";\r\nimport DeleteIcon from \"./DeleteIcon\";\r\nimport SaveIcon from \"./SaveIcon\";\r\n\r\ntype CanvasImageWindowProps = {\r\n  width: number;\r\n  height: number;\r\n  imageSource: string;\r\n  clearImage: any;\r\n  setIsEditing: any;\r\n  setImageDimensions: any;\r\n  initialDimensions: {\r\n    scale: number;\r\n    left: number;\r\n    top: number;\r\n    scaledHeight: number;\r\n    scaledWidth: number;\r\n  } | null;\r\n};\r\nexport default function CanvasImageWindow({\r\n  width,\r\n  height,\r\n  imageSource,\r\n  clearImage,\r\n  setIsEditing,\r\n  setImageDimensions,\r\n  initialDimensions\r\n}: CanvasImageWindowProps) {\r\n  const imageEl = useRef<HTMLCanvasElement | any>(null);\r\n  const windowEl = useRef(null);\r\n  const [imageManager, setImageManager] = useState<CommonImageWindow | null>(\r\n    null\r\n  );\r\n  const [_imageLoaded, setImageLoaded] = useState(false);\r\n  const [scale, setScale] = useState(0);\r\n  useEffect(() => {\r\n    if (!imageEl.current) {\r\n      return;\r\n    }\r\n    const newManager = new CommonImageWindow(\r\n      { width, height },\r\n      imageEl.current,\r\n      imageSource,\r\n      initialDimensions,\r\n      () => {\r\n        setImageLoaded(true);\r\n      }\r\n    );\r\n    newManager.handleScale((newScale: number) => {\r\n      setScale(newScale * 100);\r\n    });\r\n    if (initialDimensions) {\r\n      setScale(initialDimensions.scale);\r\n    }\r\n    setImageManager(newManager);\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        width: `${width + 8}px`\r\n      }}\r\n    >\r\n      <div\r\n        ref={windowEl}\r\n        className=\"image-window\"\r\n        style={{\r\n          width: `${width}px`,\r\n          height: `${height}px`\r\n        }}\r\n        onMouseDown={event => {\r\n          if (!imageManager) {\r\n            return;\r\n          }\r\n          imageManager.startPan(event.clientX, event.clientY);\r\n        }}\r\n        onTouchStart={event => {\r\n          if (!imageManager) {\r\n            return;\r\n          }\r\n          imageManager.startPan(\r\n            event.touches[0].clientX,\r\n            event.touches[0].clientY\r\n          );\r\n        }}\r\n        onMouseUp={event => {\r\n          if (!imageManager) {\r\n            return;\r\n          }\r\n          imageManager.endPan();\r\n        }}\r\n        onTouchEnd={event => {\r\n          if (!imageManager) {\r\n            return;\r\n          }\r\n          imageManager.endPan();\r\n        }}\r\n        onMouseLeave={() => {\r\n          if (!imageManager) {\r\n            return;\r\n          }\r\n          imageManager.endPan();\r\n        }}\r\n        onTouchCancel={() => {\r\n          if (!imageManager) {\r\n            return;\r\n          }\r\n          imageManager.endPan();\r\n        }}\r\n        onMouseMove={event => {\r\n          if (!imageManager) {\r\n            return;\r\n          }\r\n          imageManager.pan(event.clientX, event.clientY);\r\n        }}\r\n        onTouchMove={event => {\r\n          if (!imageManager) {\r\n            return;\r\n          }\r\n          imageManager.pan(event.touches[0].clientX, event.touches[0].clientY);\r\n        }}\r\n      >\r\n        <canvas ref={imageEl} width={width} height={height}>\r\n          Fallback\r\n        </canvas>\r\n      </div>\r\n      <input\r\n        className=\"scale-slider\"\r\n        type=\"range\"\r\n        min={imageManager ? imageManager.getMinScale() * 100 : 0}\r\n        max={100}\r\n        value={scale}\r\n        onMouseDown={e => {\r\n          if (!imageManager) {\r\n            return;\r\n          }\r\n          imageManager.startScale();\r\n        }}\r\n        onMouseUp={e => {\r\n          if (!imageManager) {\r\n            return;\r\n          }\r\n          imageManager.stopScale();\r\n        }}\r\n        onChange={e => {\r\n          if (!imageManager) {\r\n            return;\r\n          }\r\n          imageManager.scale(parseFloat(e.target.value) / 100);\r\n        }}\r\n      />\r\n      <button\r\n        className=\"action-button\"\r\n        style={{ left: 0 }}\r\n        onClick={() => clearImage()}\r\n      >\r\n        <DeleteIcon />\r\n      </button>\r\n      <button\r\n        className=\"action-button\"\r\n        style={{ right: 0 }}\r\n        onClick={() => {\r\n          if (!imageManager) {\r\n            return;\r\n          }\r\n          setImageDimensions(\r\n            Object.assign({}, imageManager.getImageSize(), { scale: scale })\r\n          );\r\n          setIsEditing(false);\r\n        }}\r\n      >\r\n        <SaveIcon />\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function DeleteIcon() {\r\n  return (\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n      <path d=\"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\" />\r\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n    </svg>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport EditIcon from \"./EditIcon\";\r\n\r\ntype ImagePreviewProps = {\r\n  imageSource: string;\r\n  width: number;\r\n  height: number;\r\n  imageDimensions: {\r\n    scale: number;\r\n    left: number;\r\n    top: number;\r\n    scaledHeight: number;\r\n    scaledWidth: number;\r\n  };\r\n  startEditing: () => void;\r\n};\r\nexport default function ImagePreview({\r\n  imageSource,\r\n  width,\r\n  height,\r\n  imageDimensions,\r\n  startEditing\r\n}: ImagePreviewProps) {\r\n  return (\r\n    <div\r\n      style={{\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        width: `${width + 8}px`\r\n      }}\r\n    >\r\n      <button\r\n        className=\"action-button\"\r\n        style={{ right: 0 }}\r\n        onClick={() => startEditing()}\r\n      >\r\n        <EditIcon />\r\n      </button>\r\n      <div\r\n        style={{\r\n          position: \"relative\",\r\n          width: `${width}px`,\r\n          height: `${height}px`,\r\n          overflow: \"hidden\",\r\n          borderRadius: \"50%\",\r\n          border: \"4px solid #d8dee9\"\r\n        }}\r\n      >\r\n        <img\r\n          src={imageSource}\r\n          draggable={false}\r\n          style={{\r\n            position: \"absolute\",\r\n            top: `${imageDimensions.top}px`,\r\n            left: `${imageDimensions.left}px`,\r\n            width: `${imageDimensions.scaledWidth}px`,\r\n            height: `${imageDimensions.scaledHeight}px`\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\n\r\nimport ImageUploader from \"./ImageUploader\";\r\nimport CanvasImageWindow from \"./CanvasImageWindow\";\r\nimport ImagePreview from \"./ImagePreview\";\r\n\r\ntype ImageDimensions = {\r\n  scale: number;\r\n  left: number;\r\n  top: number;\r\n  scaledHeight: number;\r\n  scaledWidth: number;\r\n}\r\n\r\nconst createFileURL = (file: File) => window.URL.createObjectURL(file);\r\n\r\ntype ReimagineProps = {\r\n  width: number;\r\n  height: number;\r\n  onSelectImage: (file: File) => void,\r\n  onEdit: (dimensions: ImageDimensions) => void\r\n};\r\nexport default function Reimagine({\r\n  width,\r\n  height,\r\n  onSelectImage,\r\n  onEdit\r\n}: ReimagineProps) {\r\n  const [imageSource, setImageSource] = useState<string | null>(null);\r\n  const [isEditing, setIsEditing] = useState(true);\r\n  const [imageDimensions, setImageDimensions] = useState<ImageDimensions | null>(null);\r\n\r\n  if (!isEditing && imageSource !== null && imageDimensions !== null) {\r\n    return (\r\n      <ImagePreview\r\n        imageSource={imageSource}\r\n        width={width}\r\n        height={height}\r\n        imageDimensions={imageDimensions}\r\n        startEditing={() => setIsEditing(true)}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (imageSource === null) {\r\n    return (\r\n      <div>\r\n        <ImageUploader\r\n          setImageSource={(source: File) => {\r\n            setImageSource(createFileURL(source))\r\n            onSelectImage(source)\r\n          }}\r\n          width={width}\r\n          height={height}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <div>\r\n      <CanvasImageWindow\r\n        width={width}\r\n        height={height}\r\n        imageSource={imageSource}\r\n        clearImage={() => {\r\n          setImageSource(null);\r\n          setImageDimensions(null);\r\n        }}\r\n        setIsEditing={setIsEditing}\r\n        setImageDimensions={(dimensions: ImageDimensions) => {\r\n          setImageDimensions(dimensions)\r\n          onEdit(dimensions)\r\n        }}\r\n        initialDimensions={imageDimensions}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport Reimagine from \"./index\";\r\n\r\ntype ImageDimensions = {\r\n  scale: number;\r\n  left: number;\r\n  top: number;\r\n  scaledHeight: number;\r\n  scaledWidth: number;\r\n}\r\n\r\nconst saveImageEdit = (imageId: string, dimensions: ImageDimensions) => {\r\n  fetch(`https://apipond.com/image_uploads/${imageId}`, {\r\n    method: 'put',\r\n    body: JSON.stringify(dimensions)\r\n  }).then(response => {\r\n    return response.json()\r\n  })\r\n}\r\n\r\nconst uploadImage = (file: File) => {\r\n  let formData = new FormData();\r\n  formData.append(\"image_upload[image]\", file);\r\n\r\n  return fetch(\"https://apipond.com/image_uploads\", {\r\n    body: formData,\r\n    method: \"post\"\r\n  })\r\n    .then(response => response.json())\r\n    .then(json => json.upload_id);\r\n};\r\n\r\nexport default function DemoComponent() {\r\n  const [imageId, setImageId] = useState(null);\r\n  return <div>\r\n    <Reimagine\r\n      width={200}\r\n      height={200}\r\n      onSelectImage={(file) => uploadImage(file).then(id => {\r\n        setImageId(id);\r\n      })}\r\n      onEdit={saveImageEdit.bind(null, imageId)}\r\n    />\r\n  </div>\r\n}\r\nReactDOM.render(\r\n  <DemoComponent />,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"names":["useRef","React","useEffect","DeleteIcon","EditIcon"],"mappings":"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"}